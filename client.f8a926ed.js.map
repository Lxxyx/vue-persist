{"version":3,"sources":["webpack:///client.f8a926ed.js","webpack:///./example/index.js","webpack:///./src/index.js"],"names":["webpackJsonp","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1__src__","use","name","expiration","el","data","created","this","$persist","methods","handleInput","_ref","target","render","h","$createElement","attrs","type","on","input","getExpiration","exp","Date","now","isExpired","Vue","arguments","length","undefined","_ref$name","defaultStoreName","defaultExpiration","_ref$read","read","k","localStorage","getItem","_ref$write","write","v","setItem","_ref$clear","clear","removeItem","cache","prototype","names","_this","storeName","storeExpiration","store","JSON","parse","_persistWatchers","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_loop","indexOf","push","$watch","val","stringify","_iterator","Symbol","iterator","next","done","err","return","exports"],"mappings":"AAAAA,cAAc,EAAE,IAEV,SAAUC,EAAQC,EAAqBC,GAE7C,YACAC,QAAOC,eAAeH,EAAqB,cAAgBI,OAAO,GAC7C,IAAIC,GAAoCJ,EAAoB,GACxDK,EAAqCL,EAAoB,ECJlFI,GAAA,EAAIE,IAAID,EAAA,GACNE,KAAM,QACNC,WAAY,MAGd,GAAIJ,GAAA,GACFK,GAAI,OACJC,MACEH,KAAM,IAERI,QALM,WAMJC,KAAKC,UAAU,UAEjBC,SACEC,YADO,SAAAC,GACiB,GAAVC,GAAUD,EAAVC,MACZL,MAAKL,KAAOU,EAAOd,QAGvBe,OAbM,WAaG,GAAAC,GAAAP,KAAAQ,cACP,OACED,GAAA,YACEA,EAAA,SAAAE,OAAOC,KAAK,OAAOnB,MAAOS,KAAKL,MAA/BgB,IAAAC,MAA8CZ,KAAKG,kBADrD,oBD+BA,SAAUjB,EAAQC,EAAqBC,GAE7C,YEZA,SAASyB,GAAcC,GACrB,MAAOA,GAAMC,KAAKC,MAAQF,EAAM,EAGlC,QAASG,GAAUH,GACjB,MAAOA,IAAQC,KAAKC,MAAQF,EAjD9B3B,EAAA,EAAe,SAAU+B,GAMjB,GAAAd,GAAAe,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,MAAAG,EAAAlB,EALNT,KAAM4B,EAKAF,SAAAC,EALmB,gBAKnBA,EAJME,EAINpB,EAJNR,WAIM6B,EAAArB,EAHNsB,OAGML,SAAAI,EAHC,SAAAE,GAAA,MAAKC,cAAaC,QAAQF,IAG3BF,EAAAK,EAAA1B,EAFN2B,QAEMV,SAAAS,EAFE,SAACH,EAAGK,GAAJ,MAAUJ,cAAaK,QAAQN,EAAGK,IAEpCF,EAAAI,EAAA9B,EADN+B,QACMd,SAAAa,EADE,SAAAP,GAAA,MAAKC,cAAaQ,WAAWT,IAC/BO,EACAG,IAENnB,GAAIoB,UAAUrC,SAAW,SAAUsC,GAA0E,GAAAC,GAAAxC,KAAnEyC,EAAmEtB,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,GAAvDI,EAAkBmB,EAAqCvB,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,GAAnBK,EACpFmB,EAAQN,EAAMI,GAAaG,KAAKC,MAAMnB,EAAKe,IAAc,KAC7DE,GAAM7C,KAAO6C,EAAM7C,SAEfmB,EAAU0B,EAAM/C,cAClBuC,EAAMM,GACNE,GACE7C,QACAF,WAAYiB,EAAc6B,KAIzBC,EAAM/C,aACT+C,EAAM/C,WAAaiB,EAAc6B,IAGnC1C,KAAK8C,iBAAmB9C,KAAK8C,oBAhB8E,IAAAC,IAAA,EAAAC,GAAA,EAAAC,EAAA5B,MAAA,KAkB3G,OAAA6B,GAlB2GC,EAAA,cAkBhGxD,GAlBgGuD,EAAA3D,KAmBzE,UAArBoD,EAAM7C,KAAKH,KACpB6C,EAAK7C,GAAQgD,EAAM7C,KAAKH,IAGtB6C,EAAKM,iBAAiBM,QAAQzD,MAAU,IAC1C6C,EAAKM,iBAAiBO,KAAK1D,GAE3B6C,EAAKc,OAAO3D,EAAM,SAAA4D,GAChBZ,EAAM7C,KAAKH,GAAQ4D,EACnBxB,EAAMU,EAAWG,KAAKY,UAAUb,QAVtCc,EAAmBlB,EAAnBmB,OAAAC,cAAAZ,GAAAG,EAAAO,EAAAG,QAAAC,MAAAd,GAAA,EAA0BI,IAlBiF,MAAAW,GAAAd,GAAA,EAAAC,EAAAa,EAAA,aAAAf,GAAAU,EAAAM,QAAAN,EAAAM,SAAA,WAAAf,EAAA,KAAAC,QF8IxG,CACA,CAED,SAAU/D,EAAQ8E,EAAS5E,GAEjCF,EAAO8E,QAAU5E,EAAoB,MAIlC","file":"client.f8a926ed.js","sourcesContent":["webpackJsonp([0,2],[\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src__ = __webpack_require__(1);\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1__src__[\"a\" /* default */], {\n  name: 'store',\n  expiration: 1000 * 10 // 10s\n});\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  data: {\n    name: ''\n  },\n  created: function created() {\n    this.$persist(['name']);\n  },\n\n  methods: {\n    handleInput: function handleInput(_ref) {\n      var target = _ref.target;\n\n      this.name = target.value;\n    }\n  },\n  render: function render() {\n    var h = this.$createElement;\n\n    return h(\n      'div',\n      null,\n      [h(\n        'input',\n        {\n          attrs: { type: 'text', value: this.name },\n          on: {\n            'input': this.handleInput\n          }\n        },\n        []\n      ), ' Your name?']\n    );\n  }\n});\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = function (Vue) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$name = _ref.name,\n      defaultStoreName = _ref$name === undefined ? 'persist:store' : _ref$name,\n      defaultExpiration = _ref.expiration,\n      _ref$read = _ref.read,\n      read = _ref$read === undefined ? function (k) {\n    return localStorage.getItem(k);\n  } : _ref$read,\n      _ref$write = _ref.write,\n      write = _ref$write === undefined ? function (k, v) {\n    return localStorage.setItem(k, v);\n  } : _ref$write,\n      _ref$clear = _ref.clear,\n      clear = _ref$clear === undefined ? function (k) {\n    return localStorage.removeItem(k);\n  } : _ref$clear;\n\n  var cache = {};\n\n  Vue.prototype.$persist = function (names) {\n    var _this = this;\n\n    var storeName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultStoreName;\n    var storeExpiration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultExpiration;\n\n    var store = cache[storeName] = JSON.parse(read(storeName) || '{}');\n    store.data = store.data || {};\n\n    if (isExpired(store.expiration)) {\n      clear(storeName);\n      store = {\n        data: {},\n        expiration: getExpiration(storeExpiration)\n      };\n    }\n\n    if (!store.expiration) {\n      store.expiration = getExpiration(storeExpiration);\n    }\n\n    this._persistWatchers = this._persistWatchers || [];\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      var _loop = function _loop() {\n        var name = _step.value;\n\n        if (typeof store.data[name] !== 'undefined') {\n          _this[name] = store.data[name];\n        }\n\n        if (_this._persistWatchers.indexOf(name) === -1) {\n          _this._persistWatchers.push(name);\n\n          _this.$watch(name, function (val) {\n            store.data[name] = val;\n            write(storeName, JSON.stringify(store));\n          });\n        }\n      };\n\n      for (var _iterator = names[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        _loop();\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n  };\n};\n\nfunction getExpiration(exp) {\n  return exp ? Date.now() + exp : 0;\n}\n\nfunction isExpired(exp) {\n  return exp && Date.now() > exp;\n}\n\n/***/ }),\n/* 2 */,\n/* 3 */,\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(0);\n\n\n/***/ })\n],[4]);\n\n\n// WEBPACK FOOTER //\n// client.f8a926ed.js","import Vue from 'vue'\nimport VuePersist from '../src'\n\nVue.use(VuePersist, {\n  name: 'store',\n  expiration: 1000 * 10 // 10s\n})\n\nnew Vue({\n  el: '#app',\n  data: {\n    name: ''\n  },\n  created() {\n    this.$persist(['name'])\n  },\n  methods: {\n    handleInput({ target }) {\n      this.name = target.value\n    }\n  },\n  render() {\n    return (\n      <div>\n        <input type=\"text\" value={this.name} onInput={this.handleInput} /> Your name?\n      </div>\n    )\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./example/index.js","export default function (Vue, {\n  name: defaultStoreName = 'persist:store',\n  expiration: defaultExpiration,\n  read = k => localStorage.getItem(k),\n  write = (k, v) => localStorage.setItem(k, v),\n  clear = k => localStorage.removeItem(k)\n} = {}) {\n  const cache = {}\n\n  Vue.prototype.$persist = function (names, storeName = defaultStoreName, storeExpiration = defaultExpiration) {\n    let store = cache[storeName] = JSON.parse(read(storeName) || '{}')\n    store.data = store.data || {}\n\n    if (isExpired(store.expiration)) {\n      clear(storeName)\n      store = {\n        data: {},\n        expiration: getExpiration(storeExpiration)\n      }\n    }\n\n    if (!store.expiration) {\n      store.expiration = getExpiration(storeExpiration)\n    }\n\n    this._persistWatchers = this._persistWatchers || []\n\n    for (const name of names) {\n      if (typeof store.data[name] !== 'undefined') {\n        this[name] = store.data[name]\n      }\n\n      if (this._persistWatchers.indexOf(name) === -1) {\n        this._persistWatchers.push(name)\n\n        this.$watch(name, val => {\n          store.data[name] = val\n          write(storeName, JSON.stringify(store))\n        })\n      }\n    }\n  }\n}\n\nfunction getExpiration(exp) {\n  return exp ? Date.now() + exp : 0\n}\n\nfunction isExpired(exp) {\n  return exp && (Date.now() > exp)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}